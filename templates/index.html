<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yale Confidence Indices</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <div class="yale-header">
                <div class="yale-brand">
                    <img src="{{ url_for('static', filename='images/yale-logo.png') }}" alt="Yale Logo" class="yale-logo">
                    <div class="yale-text">
                        <div class="yale-school">Yale School of Management</div>
                        <div class="yale-center">International Center for Finance</div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <h1 class="main-title">United States Stock Market Confidence Indices</h1>
        
        <section id="about">
            <h2 class="section-subtitle">About the Indexes</h2>
            <hr class="section-divider">
            
            <div class="collapsible-section">
                <div class="collapsible-header">Issues in Constructing Confidence Indices</div>
                <div class="collapsible-content">
                    <p>The construction of confidence indices involves careful consideration of survey methodologies, data collection processes, and statistical analysis. Key challenges include ensuring representative sampling, accounting for response bias, and maintaining consistency over time.</p>
                </div>
            </div>

            <div class="collapsible-section">
                <div class="collapsible-header">Data</div>
                <div class="collapsible-content">
                    <p>The confidence indices are based on survey data collected from institutional investors and individual investors. The surveys are conducted regularly to track changes in market sentiment and investor confidence over time.</p>
                </div>
            </div>

            <div class="collapsible-section">
                <div class="collapsible-header">Note</div>
                <div class="collapsible-content">
                    <p>These indices are intended to provide insights into market sentiment and should be considered alongside other market indicators. Historical data and methodologies are subject to periodic review and updates.</p>
                </div>
            </div>
        </section>

        <section id="download" class="text-center my-5">
            <button class="download-button" onclick="downloadCSV()">Download Data</button>
        </section>

        <section id="plots">
            <div class="index-selector">
                <select id="index-select" class="form-select" onchange="switchIndex(this.value)">
                    <option value="one-year">U.S. One-Year Confidence Index</option>
                    <option value="crash">U.S. Crash Confidence Index</option>
                    <option value="buy-dips">U.S. Buy-on-Dips Confidence Index</option>
                    <option value="valuation">U.S. Valuation Confidence Index</option>
                </select>
            </div>

            <h2 id="plot-title" class="plot-title"></h2>
            <div id="plot-container" class="plot-container"></div>

            <div class="calculation-section">
                <h3>Question & Calculation:</h3>
                <div id="calculation-content"></div>
            </div>
        </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
